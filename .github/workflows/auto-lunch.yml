name: ğŸ± ê¸‰ì‹ ìë™ ì—…ë°ì´íŠ¸

on:
  schedule:
    - cron: '0 0 * * *'  # ë§¤ì¼ 00:00 UTC (í•œêµ­ ê¸°ì¤€ ì˜¤ì „ 9ì‹œ)
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ë„ ê°€ëŠ¥

jobs:
  update-lunch:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ ì €ì¥ì†Œ ê°€ì ¸ì˜¤ê¸°
        uses: actions/checkout@v2

      - name: ğŸ Python ì„¤ì¹˜
        uses: actions/setup-python@v2
        with:
          python-version: '3.x'

      - name: ğŸ“¦ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
        run: pip install requests

      - name: ğŸ½ï¸ ê¸‰ì‹ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        run: python get_lunch.py

      - name: ğŸ’¾ ë³€ê²½ì‚¬í•­ ì»¤ë°‹ & í‘¸ì‹œ
        run: |
          git config --global user.name 'GitHub Action'
          git config --global user.email 'action@github.com'
          git add lunch.json
          git commit -m "ğŸ“† ìë™ ê¸‰ì‹ ì •ë³´ ê°±ì‹ " || echo "ë³€ê²½ ì—†ìŒ"
          git push
